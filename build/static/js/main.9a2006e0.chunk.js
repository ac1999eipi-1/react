(this["webpackJsonphacker-stories"]=this["webpackJsonphacker-stories"]||[]).push([[0],{18:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(8),l=n.n(c),s=(n(18),n(26)),o=n(5);const i=(e,t)=>"".concat("https://hn.algolia.com/api/v1").concat("/search","?").concat("query=").concat(e,"&").concat("page=").concat(t),u=e=>e.substring(e.lastIndexOf("?")+1,e.lastIndexOf("&")).replace("query=",""),m=(e,t)=>{switch(t.type){case"STORIES_FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"STORIES_FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,data:0===t.payload.page?t.payload.list:e.data.concat(t.payload.list),page:t.payload.page};case"STORIES_FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};case"REMOVE_STORY":return{...e,data:e.data.filter(e=>t.payload.objectID!==e.objectID)};default:throw new Error}},E=e=>{let{lastSearches:t,onLastSearch:n}=e;return a.createElement(a.Fragment,null,t.map((e,t)=>a.createElement("button",{key:e+t,type:"button",onClick:()=>n(e)},e)))},p=e=>{let{searchTerm:t,onSearchInput:n,onSearchSubmit:r}=e;return a.createElement("form",{onSubmit:r},a.createElement(d,{id:"search",value:t,isFocused:!0,onInputChange:n},a.createElement("strong",null,"Search:")),a.createElement("button",{type:"submit",disabled:!t},"Submit"))},d=e=>{let{id:t,value:n,type:r="text",onInputChange:c,isFocused:l,children:s}=e;const o=a.useRef();return a.useEffect(()=>{l&&o.current&&o.current.focus()},[l]),a.createElement(a.Fragment,null,a.createElement("label",{htmlFor:t},s),"\xa0",a.createElement("input",{id:t,ref:o,type:r,value:n,onChange:c}))},h={NONE:e=>e,TITLE:e=>Object(o.sortBy)(e,"title"),AUTHOR:e=>Object(o.sortBy)(e,"author"),COMMENT:e=>Object(o.sortBy)(e,"num_comments").reverse(),POINT:e=>Object(o.sortBy)(e,"points").reverse()},y=e=>{let{list:t,onRemoveItem:n}=e;const[r,c]=a.useState({sortKey:"NONE",isReverse:!1}),l=e=>{const t=r.sortKey===e&&!r.isReverse;c({sortKey:e,isReverse:t})},s=h[r.sortKey],o=r.isReverse?s(t).reverse():s(t);return a.createElement("ul",null,a.createElement("li",{style:{display:"flex"}},a.createElement("span",{style:{width:"40%"}},a.createElement("button",{type:"button",onClick:()=>l("TITLE")},"Title")),a.createElement("span",{style:{width:"30%"}},a.createElement("button",{type:"button",onClick:()=>l("AUTHOR")},"Author")),a.createElement("span",{style:{width:"10%"}},a.createElement("button",{type:"button",onClick:()=>l("COMMENT")},"Comments")),a.createElement("span",{style:{width:"10%"}},a.createElement("button",{type:"button",onClick:()=>l("POINT")},"Points")),a.createElement("span",{style:{width:"10%"}},"Actions")),o.map(e=>a.createElement(S,{key:e.objectID,item:e,onRemoveItem:n})))},S=e=>{let{item:t,onRemoveItem:n}=e;return a.createElement("li",{style:{display:"flex"}},a.createElement("span",{style:{width:"40%"}},a.createElement("a",{href:t.url},t.title)),a.createElement("span",{style:{width:"30%"}},t.author),a.createElement("span",{style:{width:"10%"}},t.num_comments),a.createElement("span",{style:{width:"10%"}},t.points),a.createElement("span",{style:{width:"10%"}},a.createElement("button",{type:"button",onClick:()=>n(t)},"Dismiss")))};var g=()=>{const[e,t]=((e,t)=>{const[n,r]=a.useState(localStorage.getItem(e)||t);return a.useEffect(()=>{localStorage.setItem(e,n)},[n,e]),[n,r]})("search","React"),[n,r]=a.useState([i(e,0)]),[c,l]=a.useReducer(m,{data:[],page:0,isLoading:!1,isError:!1}),o=a.useCallback(async()=>{l({type:"STORIES_FETCH_INIT"});try{const e=n[n.length-1],t=await s.a.get(e);l({type:"STORIES_FETCH_SUCCESS",payload:{list:t.data.hits,page:t.data.page}})}catch{l({type:"STORIES_FETCH_FAILURE"})}},[n]);a.useEffect(()=>{o()},[o]);const d=(e,t)=>{const a=i(e,t);r(n.concat(a))},h=(e=>e.reduce((e,t,n)=>{const a=u(t);if(0===n)return e.concat(a);return a===e[e.length-1]?e:e.concat(a)},[]).slice(-6).slice(0,-1))(n);return a.createElement("div",null,a.createElement("h1",null,"My Hacker Stories"),a.createElement(p,{searchTerm:e,onSearchInput:e=>{t(e.target.value)},onSearchSubmit:t=>{d(e,0),t.preventDefault()}}),a.createElement(E,{lastSearches:h,onLastSearch:e=>{t(e),d(e,0)}}),a.createElement("hr",null),c.isError&&a.createElement("p",null,"Something went wrong ..."),a.createElement(y,{list:c.data,onRemoveItem:e=>{l({type:"REMOVE_STORY",payload:e})}}),c.isLoading?a.createElement("p",null,"Loading ..."):a.createElement("button",{type:"button",onClick:()=>{const e=n[n.length-1],t=u(e);d(t,c.page+1)}},"More"))};var b=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then(t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:c,getTTFB:l}=t;n(e),a(e),r(e),c(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null))),b()},9:function(e,t,n){e.exports=n(24)}},[[9,1,2]]]);
//# sourceMappingURL=main.9a2006e0.chunk.js.map