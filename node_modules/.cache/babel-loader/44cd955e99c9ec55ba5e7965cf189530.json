{"ast":null,"code":"var _jsxFileName = \"/Users/jaime/Desktop/road-to-react/hacker-stories/src/App.js\";\nimport * as React from 'react';\nimport axios from 'axios';\nimport { sortBy } from 'lodash';\nconst API_ENDPOINT = 'https://hn.algolia.com/api/v1/search?query=';\nconst getUrl = searchTerm => `${API_ENDPOINT}${searchTerm}`;\nconst extractSearchTerm = url => url.replace(API_ENDPOINT, '');\nconst getLastSearches = urls => urls.reduce((result, url, index) => {\n  const searchTerm = extractSearchTerm(url);\n  if (index === 0) {\n    return result.concat(searchTerm);\n  }\n  const previousSearchTerm = result[result.length - 1];\n  if (searchTerm === previousSearchTerm) {\n    return result;\n  } else {\n    return result.concat(searchTerm);\n  }\n}, []).slice(-6).slice(0, -1);\nconst useSemiPersistentState = (key, initialState) => {\n  const [value, setValue] = React.useState(localStorage.getItem(key) || initialState);\n  React.useEffect(() => {\n    localStorage.setItem(key, value);\n  }, [value, key]);\n  return [value, setValue];\n};\nconst storiesReducer = (state, action) => {\n  switch (action.type) {\n    case 'STORIES_FETCH_INIT':\n      return {\n        ...state,\n        isLoading: true,\n        isError: false\n      };\n    case 'STORIES_FETCH_SUCCESS':\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        data: action.payload\n      };\n    case 'STORIES_FETCH_FAILURE':\n      return {\n        ...state,\n        isLoading: false,\n        isError: true\n      };\n    case 'REMOVE_STORY':\n      return {\n        ...state,\n        data: state.data.filter(story => action.payload.objectID !== story.objectID)\n      };\n    default:\n      throw new Error();\n  }\n};\nconst App = () => {\n  const [searchTerm, setSearchTerm] = useSemiPersistentState('search', 'React');\n  const [urls, setUrls] = React.useState([getUrl(searchTerm)]);\n  const [stories, dispatchStories] = React.useReducer(storiesReducer, {\n    data: [],\n    isLoading: false,\n    isError: false\n  });\n  const handleFetchStories = React.useCallback(async () => {\n    dispatchStories({\n      type: 'STORIES_FETCH_INIT'\n    });\n    try {\n      const lastUrl = urls[urls.length - 1];\n      const result = await axios.get(lastUrl);\n      dispatchStories({\n        type: 'STORIES_FETCH_SUCCESS',\n        payload: result.data.hits\n      });\n    } catch {\n      dispatchStories({\n        type: 'STORIES_FETCH_FAILURE'\n      });\n    }\n  }, [urls]);\n  React.useEffect(() => {\n    handleFetchStories();\n  }, [handleFetchStories]);\n  const handleRemoveStory = item => {\n    dispatchStories({\n      type: 'REMOVE_STORY',\n      payload: item\n    });\n  };\n  const handleSearchInput = event => {\n    setSearchTerm(event.target.value);\n  };\n  const handleSearchSubmit = event => {\n    handleSearch(searchTerm);\n    event.preventDefault();\n  };\n  const handleLastSearch = searchTerm => {\n    setSearchTerm(searchTerm);\n    handleSearch(searchTerm);\n  };\n  const handleSearch = searchTerm => {\n    const url = getUrl(searchTerm);\n    setUrls(urls.concat(url));\n  };\n  const lastSearches = getLastSearches(urls);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, \"My Hacker Stories\"), /*#__PURE__*/React.createElement(SearchForm, {\n    searchTerm: searchTerm,\n    onSearchInput: handleSearchInput,\n    onSearchSubmit: handleSearchSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(LastSearches, {\n    lastSearches: lastSearches,\n    onLastSearch: handleLastSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }), stories.isError && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 27\n    }\n  }, \"Something went wrong ...\"), stories.isLoading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, \"Loading ...\") : /*#__PURE__*/React.createElement(List, {\n    list: stories.data,\n    onRemoveItem: handleRemoveStory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }));\n};\nconst LastSearches = ({\n  lastSearches,\n  onLastSearch\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, lastSearches.map((searchTerm, index) => /*#__PURE__*/React.createElement(\"button\", {\n  key: searchTerm + index,\n  type: \"button\",\n  onClick: () => onLastSearch(searchTerm),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 7\n  }\n}, searchTerm)));\nconst SearchForm = ({\n  searchTerm,\n  onSearchInput,\n  onSearchSubmit\n}) => /*#__PURE__*/React.createElement(\"form\", {\n  onSubmit: onSearchSubmit,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(InputWithLabel, {\n  id: \"search\",\n  value: searchTerm,\n  isFocused: true,\n  onInputChange: onSearchInput,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"strong\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 7\n  }\n}, \"Search:\")), /*#__PURE__*/React.createElement(\"button\", {\n  type: \"submit\",\n  disabled: !searchTerm,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 5\n  }\n}, \"Submit\"));\nconst InputWithLabel = ({\n  id,\n  value,\n  type = 'text',\n  onInputChange,\n  isFocused,\n  children\n}) => {\n  const inputRef = React.useRef();\n  React.useEffect(() => {\n    if (isFocused && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isFocused]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, children), \"\\xA0\", /*#__PURE__*/React.createElement(\"input\", {\n    id: id,\n    ref: inputRef,\n    type: type,\n    value: value,\n    onChange: onInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }\n  }));\n};\nconst SORTS = {\n  NONE: list => list,\n  TITLE: list => sortBy(list, 'title'),\n  AUTHOR: list => sortBy(list, 'author'),\n  COMMENT: list => sortBy(list, 'num_comments').reverse(),\n  POINT: list => sortBy(list, 'points').reverse()\n};\nconst List = ({\n  list,\n  onRemoveItem\n}) => {\n  const [sort, setSort] = React.useState({\n    sortKey: 'NONE',\n    isReverse: false\n  });\n  const handleSort = sortKey => {\n    const isReverse = sort.sortKey === sortKey && !sort.isReverse;\n    setSort({\n      sortKey,\n      isReverse\n    });\n  };\n  const sortFunction = SORTS[sort.sortKey];\n  const sortedList = sort.isReverse ? sortFunction(list).reverse() : sortFunction(list);\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      width: '40%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleSort('TITLE'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 11\n    }\n  }, \"Title\")), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      width: '30%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleSort('AUTHOR'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }\n  }, \"Author\")), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      width: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleSort('COMMENT'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 11\n    }\n  }, \"Comments\")), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      width: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleSort('POINT'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, \"Points\")), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      width: '10%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }\n  }, \"Actions\")), sortedList.map(item => /*#__PURE__*/React.createElement(Item, {\n    key: item.objectID,\n    item: item,\n    onRemoveItem: onRemoveItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }\n  })));\n};\nconst Item = ({\n  item,\n  onRemoveItem\n}) => /*#__PURE__*/React.createElement(\"li\", {\n  style: {\n    display: 'flex'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 296,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    width: '40%'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"a\", {\n  href: item.url,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 7\n  }\n}, item.title)), /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    width: '30%'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 5\n  }\n}, item.author), /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    width: '10%'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }\n}, item.num_comments), /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    width: '10%'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 302,\n    columnNumber: 5\n  }\n}, item.points), /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    width: '10%'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"button\", {\n  type: \"button\",\n  onClick: () => onRemoveItem(item),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 7\n  }\n}, \"Dismiss\")));\nexport default App;","map":{"version":3,"names":["React","axios","sortBy","API_ENDPOINT","getUrl","searchTerm","extractSearchTerm","url","replace","getLastSearches","urls","reduce","result","index","concat","previousSearchTerm","length","slice","useSemiPersistentState","key","initialState","value","setValue","useState","localStorage","getItem","useEffect","setItem","storiesReducer","state","action","type","isLoading","isError","data","payload","filter","story","objectID","Error","App","setSearchTerm","setUrls","stories","dispatchStories","useReducer","handleFetchStories","useCallback","lastUrl","get","hits","handleRemoveStory","item","handleSearchInput","event","target","handleSearchSubmit","handleSearch","preventDefault","handleLastSearch","lastSearches","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","SearchForm","onSearchInput","onSearchSubmit","LastSearches","onLastSearch","List","list","onRemoveItem","Fragment","map","onClick","onSubmit","InputWithLabel","id","isFocused","onInputChange","disabled","children","inputRef","useRef","current","focus","htmlFor","ref","onChange","SORTS","NONE","TITLE","AUTHOR","COMMENT","reverse","POINT","sort","setSort","sortKey","isReverse","handleSort","sortFunction","sortedList","style","display","width","Item","href","title","author","num_comments","points"],"sources":["/Users/jaime/Desktop/road-to-react/hacker-stories/src/App.js"],"sourcesContent":["import * as React from 'react';\nimport axios from 'axios';\nimport { sortBy } from 'lodash';\n\nconst API_ENDPOINT = 'https://hn.algolia.com/api/v1/search?query=';\n\nconst getUrl = (searchTerm) => `${API_ENDPOINT}${searchTerm}`;\n\nconst extractSearchTerm = (url) => url.replace(API_ENDPOINT, '');\n\nconst getLastSearches = (urls) =>\n  urls\n    .reduce((result, url, index) => {\n      const searchTerm = extractSearchTerm(url);\n\n      if (index === 0) {\n        return result.concat(searchTerm);\n      }\n\n      const previousSearchTerm = result[result.length - 1];\n\n      if (searchTerm === previousSearchTerm) {\n        return result;\n      } else {\n        return result.concat(searchTerm);\n      }\n    }, [])\n    .slice(-6)\n    .slice(0, -1);\n\nconst useSemiPersistentState = (key, initialState) => {\n  const [value, setValue] = React.useState(\n    localStorage.getItem(key) || initialState\n  );\n\n  React.useEffect(() => {\n    localStorage.setItem(key, value);\n  }, [value, key]);\n\n  return [value, setValue];\n};\n\nconst storiesReducer = (state, action) => {\n  switch (action.type) {\n    case 'STORIES_FETCH_INIT':\n      return {\n        ...state,\n        isLoading: true,\n        isError: false,\n      };\n    case 'STORIES_FETCH_SUCCESS':\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        data: action.payload,\n      };\n    case 'STORIES_FETCH_FAILURE':\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    case 'REMOVE_STORY':\n      return {\n        ...state,\n        data: state.data.filter(\n          (story) => action.payload.objectID !== story.objectID\n        ),\n      };\n    default:\n      throw new Error();\n  }\n};\n\nconst App = () => {\n  const [searchTerm, setSearchTerm] = useSemiPersistentState(\n    'search',\n    'React'\n  );\n\n  const [urls, setUrls] = React.useState([getUrl(searchTerm)]);\n\n  const [stories, dispatchStories] = React.useReducer(\n    storiesReducer,\n    { data: [], isLoading: false, isError: false }\n  );\n\n  const handleFetchStories = React.useCallback(async () => {\n    dispatchStories({ type: 'STORIES_FETCH_INIT' });\n\n    try {\n      const lastUrl = urls[urls.length - 1];\n      const result = await axios.get(lastUrl);\n\n      dispatchStories({\n        type: 'STORIES_FETCH_SUCCESS',\n        payload: result.data.hits,\n      });\n    } catch {\n      dispatchStories({ type: 'STORIES_FETCH_FAILURE' });\n    }\n  }, [urls]);\n\n  React.useEffect(() => {\n    handleFetchStories();\n  }, [handleFetchStories]);\n\n  const handleRemoveStory = (item) => {\n    dispatchStories({\n      type: 'REMOVE_STORY',\n      payload: item,\n    });\n  };\n\n  const handleSearchInput = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const handleSearchSubmit = (event) => {\n    handleSearch(searchTerm);\n\n    event.preventDefault();\n  };\n\n  const handleLastSearch = (searchTerm) => {\n    setSearchTerm(searchTerm);\n\n    handleSearch(searchTerm);\n  };\n\n  const handleSearch = (searchTerm) => {\n    const url = getUrl(searchTerm);\n    setUrls(urls.concat(url));\n  };\n\n  const lastSearches = getLastSearches(urls);\n\n  return (\n    <div>\n      <h1>My Hacker Stories</h1>\n\n      <SearchForm\n        searchTerm={searchTerm}\n        onSearchInput={handleSearchInput}\n        onSearchSubmit={handleSearchSubmit}\n      />\n\n      <LastSearches\n        lastSearches={lastSearches}\n        onLastSearch={handleLastSearch}\n      />\n\n      <hr />\n\n      {stories.isError && <p>Something went wrong ...</p>}\n\n      {stories.isLoading ? (\n        <p>Loading ...</p>\n      ) : (\n        <List list={stories.data} onRemoveItem={handleRemoveStory} />\n      )}\n    </div>\n  );\n};\n\nconst LastSearches = ({ lastSearches, onLastSearch }) => (\n  <>\n    {lastSearches.map((searchTerm, index) => (\n      <button\n        key={searchTerm + index}\n        type=\"button\"\n        onClick={() => onLastSearch(searchTerm)}\n      >\n        {searchTerm}\n      </button>\n    ))}\n  </>\n);\n\nconst SearchForm = ({\n  searchTerm,\n  onSearchInput,\n  onSearchSubmit,\n}) => (\n  <form onSubmit={onSearchSubmit}>\n    <InputWithLabel\n      id=\"search\"\n      value={searchTerm}\n      isFocused\n      onInputChange={onSearchInput}\n    >\n      <strong>Search:</strong>\n    </InputWithLabel>\n\n    <button type=\"submit\" disabled={!searchTerm}>\n      Submit\n    </button>\n  </form>\n);\n\nconst InputWithLabel = ({\n  id,\n  value,\n  type = 'text',\n  onInputChange,\n  isFocused,\n  children,\n}) => {\n  const inputRef = React.useRef();\n\n  React.useEffect(() => {\n    if (isFocused && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isFocused]);\n\n  return (\n    <>\n      <label htmlFor={id}>{children}</label>\n      &nbsp;\n      <input\n        id={id}\n        ref={inputRef}\n        type={type}\n        value={value}\n        onChange={onInputChange}\n      />\n    </>\n  );\n};\n\nconst SORTS = {\n  NONE: (list) => list,\n  TITLE: (list) => sortBy(list, 'title'),\n  AUTHOR: (list) => sortBy(list, 'author'),\n  COMMENT: (list) => sortBy(list, 'num_comments').reverse(),\n  POINT: (list) => sortBy(list, 'points').reverse(),\n};\n\nconst List = ({ list, onRemoveItem }) => {\n  const [sort, setSort] = React.useState({\n    sortKey: 'NONE',\n    isReverse: false,\n  });\n\n  const handleSort = (sortKey) => {\n    const isReverse = sort.sortKey === sortKey && !sort.isReverse;\n\n    setSort({ sortKey, isReverse });\n  };\n\n  const sortFunction = SORTS[sort.sortKey];\n  const sortedList = sort.isReverse\n    ? sortFunction(list).reverse()\n    : sortFunction(list);\n\n  return (\n    <ul>\n      <li style={{ display: 'flex' }}>\n        <span style={{ width: '40%' }}>\n          <button type=\"button\" onClick={() => handleSort('TITLE')}>\n            Title\n          </button>\n        </span>\n        <span style={{ width: '30%' }}>\n          <button type=\"button\" onClick={() => handleSort('AUTHOR')}>\n            Author\n          </button>\n        </span>\n        <span style={{ width: '10%' }}>\n          <button type=\"button\" onClick={() => handleSort('COMMENT')}>\n            Comments\n          </button>\n        </span>\n        <span style={{ width: '10%' }}>\n          <button type=\"button\" onClick={() => handleSort('POINT')}>\n            Points\n          </button>\n        </span>\n        <span style={{ width: '10%' }}>Actions</span>\n      </li>\n\n      {sortedList.map((item) => (\n        <Item\n          key={item.objectID}\n          item={item}\n          onRemoveItem={onRemoveItem}\n        />\n      ))}\n    </ul>\n  );\n};\n\nconst Item = ({ item, onRemoveItem }) => (\n  <li style={{ display: 'flex' }}>\n    <span style={{ width: '40%' }}>\n      <a href={item.url}>{item.title}</a>\n    </span>\n    <span style={{ width: '30%' }}>{item.author}</span>\n    <span style={{ width: '10%' }}>{item.num_comments}</span>\n    <span style={{ width: '10%' }}>{item.points}</span>\n    <span style={{ width: '10%' }}>\n      <button type=\"button\" onClick={() => onRemoveItem(item)}>\n        Dismiss\n      </button>\n    </span>\n  </li>\n);\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}